name: Lint SQL
on:   
  workflow_dispatch:
env:
  SQLFLUFF_VERSION: 1.4.5
jobs:
  lint-sql:
    runs-on: ubuntu-20.04
    steps:
      - uses: "actions/checkout@v2"
      - uses: "actions/setup-python@v2"
        with:
            python-version: "3.9"
      - name: Cache sqlfluff
        uses: actions/cache@v3
        with:
          key: ${{ runner.os }}-sqlfluff-${{ env.SQLFLUFF_VERSION }}
          path: ~/.cache/sqlfluff
      - name: Install SQLFluff
        run: "pip install sqlfluff==${{ env.SQLFLUFF_VERSION }}"
